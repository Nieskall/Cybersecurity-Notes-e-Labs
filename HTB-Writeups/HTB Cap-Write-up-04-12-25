# üîí HTB Cap: Write-up Completo (Acesso Inicial e Escalada Root)

Este documento detalha o fluxo de trabalho completo para a resolu√ß√£o da m√°quina HTB Cap, desde a enumera√ß√£o inicial e a crucial captura de credenciais at√© a explora√ß√£o final de privil√©gios.

## 1. Enumera√ß√£o Inicial e Captura de Credenciais

O acesso inicial √† m√°quina foi conquistado pela identifica√ß√£o de um servi√ßo de rede n√£o criptografado, o que permitiu a captura de credenciais de login.

* **Ferramenta de Varredura:** **Nmap** (Identificou servi√ßos abertos como FTP, SSH e HTTP).
* **Vetor de Ataque:** Servi√ßo de Rede **n√£o criptografado** (provavelmente FTP).
* **Ferramenta de An√°lise:** **Wireshark**
    * **T√©cnica:** Captura de pacotes de rede enquanto o tr√°fego de *login* passava pelo servi√ßo vulner√°vel.
    * **Descoberta:** A senha do SSH foi interceptada em texto claro, permitindo o *login* inicial.
* **Acesso Inicial:** Conex√£o SSH como o usu√°rio `nathan`.

## 2. Escalada de Privil√©gios (Privilege Escalation)

A escalada de privil√©gios (do usu√°rio `nathan` para `root`) foi alcan√ßada explorando uma vulnerabilidade de configura√ß√£o do sistema Linux.

* **Ferramenta de Diagn√≥stico:** **LinPEAS** (Identificou o vetor de escalada).
* **Vulnerabilidade:** M√° Configura√ß√£o de **Capabilities** (Habilidades) no bin√°rio do Python.
* **Bin√°rio Explor√°vel:** `/usr/bin/python3.8`
* **Capacidade Alvo:** `cap_setuid`

### 2.1. Explica√ß√£o da Capacidade `cap_setuid`

A capacidade `cap_setuid` √© uma permiss√£o granular que permite a um processo **alterar seu pr√≥prio ID de Usu√°rio (UID)** para qualquer valor. Ao definir o UID para **0**, o processo adquire os privil√©gios totais do usu√°rio **root**.

### 2.2. Explora√ß√£o Final e Obten√ß√£o de `root`

O bin√°rio vulner√°vel do Python foi iniciado, e o seguinte *payload* foi executado para escalar os privil√©gios:

1.  **Comando para Iniciar o Python:**
    ```bash
    /usr/bin/python3.8
    ```
2.  **Payload Dentro do Python:**
    ```python
    >>> import os
    >>> os.setuid(0)
    >>> os.system("/bin/bash")
    ```

* **Resultado:** Obten√ß√£o de um *shell* Bash com privil√©gios de **root** e captura da *flag* final (`root.txt`).

Qual ser√° o pr√≥ximo arquivo que voc√™ gostaria de criar ou revisar?
